(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1273:function(t,s,a){"use strict";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"网站支持https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网站支持https"}},[t._v("#")]),t._v(" 网站支持https")]),t._v(" "),e("h2",{attrs:{id:"_1-使用免费的-let-s-encrypt-证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用免费的-let-s-encrypt-证书"}},[t._v("#")]),t._v(" 1. 使用免费的 Let's Encrypt 证书")]),t._v(" "),e("p",[t._v("Let's Encrypt 能够免费签名一个证书，所以假如要求不高，可以使用它签名的证书，使用也非常的简单，只要验证邮箱地址就能使用了，不过有 90 天的有效期（到期前可以续）。")]),t._v(" "),e("p",[t._v("为了生成证书，Let's Encrypt 提供了一个软件 Certbot 来进行管理，这个软件有很多插件，可以生成证书并自动化配置 Nginx/Apache ，不过我还是选择使用它生成密钥对和证书，然后自己在 WEB 服务器上进行配置，使用很简单。")]),t._v(" "),e("h2",{attrs:{id:"_2-生成指定域名证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成指定域名证书"}},[t._v("#")]),t._v(" 2. 生成指定域名证书")]),t._v(" "),e("h3",{attrs:{id:"_2-1-执行生成命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-执行生成命令"}},[t._v("#")]),t._v(" 2.1 执行生成命令")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("certbot certonly --email "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("312905679")]),t._v("@qq.com -d test.isture.com \n")])])]),e("p",[e("img",{attrs:{src:a(856),alt:"image-20201110230101897"}})]),t._v(" "),e("p",[t._v("这里选择第二项")]),t._v(" "),e("h3",{attrs:{id:"_2-2-nginx的配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nginx的配置"}},[t._v("#")]),t._v(" 2.2 nginx的配置")]),t._v(" "),e("h1",{attrs:{id:"商城app-接口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#商城app-接口"}},[t._v("#")]),t._v(" 商城app 接口")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v(" server "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen          "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    listen  "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name     test.isture.com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate /etc/letsencrypt/live/test.isture.com/fullchain.pem"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate_key /etc/letsencrypt/live/test.isture.com/privkey.pem"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location / "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            proxy_pass http://localhost:8085"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"_3-certbot-常用指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-certbot-常用指令"}},[t._v("#")]),t._v(" 3. certbot 常用指令")]),t._v(" "),e("h3",{attrs:{id:"_3-1-列出证书和到期时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-列出证书和到期时间"}},[t._v("#")]),t._v(" 3.1 列出证书和到期时间")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("certbot certificates\n")])])]),e("p",[e("img",{attrs:{src:a(857),alt:"image-20201110225053075"}})]),t._v(" "),e("p",[t._v("以上可以看出此https 证书已经过期了")]),t._v(" "),e("h3",{attrs:{id:"_3-2-测试是否能更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-测试是否能更新"}},[t._v("#")]),t._v(" 3.2 测试是否能更新")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("certbot renew --dry-run\n")])])]),e("h3",{attrs:{id:"_3-3-手动立即更新ssl证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-手动立即更新ssl证书"}},[t._v("#")]),t._v(" 3.3 手动立即更新SSL证书")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("certbot renew \n")])])]),e("h2",{attrs:{id:"_4-集成问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-集成问题"}},[t._v("#")]),t._v(" 4. 集成问题")]),t._v(" "),e("h3",{attrs:{id:"_4-1-let-s-encrypt-配置-ssl-证书的时候-提示dns-problem-nxdomain-looking-up-a-for-xxx-com"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-let-s-encrypt-配置-ssl-证书的时候-提示dns-problem-nxdomain-looking-up-a-for-xxx-com"}},[t._v("#")]),t._v(" 4.1 Let's Encrypt 配置 SSL 证书的时候，提示DNS problem: NXDOMAIN looking up A for xxx.com")]),t._v(" "),e("p",[t._v("问题标的比较明确： DNS Problem .")]),t._v(" "),e("p",[t._v("ping 不通该域名，可能是域名解析没有配置")]),t._v(" "),e("h3",{attrs:{id:"_4-2-最近授权太多次"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-最近授权太多次"}},[t._v("#")]),t._v(" 4.2 最近授权太多次")]),t._v(" "),e("p",[e("img",{attrs:{src:a(858),alt:"image-20201110233310535"}})]),t._v(" "),e("h2",{attrs:{id:"参考文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://learnku.com/laravel/t/2525/using-certbot-lets-encrypt-small-step-run-towards-https",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Certot"),e("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports},856:function(t,s,a){t.exports=a.p+"assets/img/image-20201110230101897.93bab21c.png"},857:function(t,s,a){t.exports=a.p+"assets/img/image-20201110225053075.a0e52e5d.png"},858:function(t,s,a){t.exports=a.p+"assets/img/image-20201110233310535.e25d1b34.png"}}]);