(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{1263:function(X,a,e){"use strict";e.r(a);var t=e(42),s=Object(t.a)({},(function(){var X=this,a=X.$createElement,t=X._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":X.$parent.slotKey}},[t("h1",{attrs:{id:"redist禁用危险命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redist禁用危险命令"}},[X._v("#")]),X._v(" Redist禁用危险命令")]),X._v(" "),t("h2",{attrs:{id:"_1-redis线上不同使用危险的命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-redis线上不同使用危险的命令"}},[X._v("#")]),X._v(" 1. Redis线上不同使用危险的命令")]),X._v(" "),t("ol",[t("li",[t("p",[X._v("keys *")]),X._v(" "),t("blockquote",[t("p",[X._v("虽然其模糊匹配功能使用非常方便也很强大，在小数据量情况使用没什么问题，数据量大会导致 Redis 锁住及 CPU 飙升，在生产环境建议禁用或者重命名！")])])]),X._v(" "),t("li",[t("p",[X._v("flushdb")]),X._v(" "),t("blockquote",[t("p",[X._v("删除Redis 中当前所在数据库中所有记录，并且此命令从不会执行失败")])])]),X._v(" "),t("li",[t("p",[X._v("flushall")]),X._v(" "),t("blockquote",[t("p",[X._v("删除 Redis 中所有数据库中的所有记录，不只是当前所在的数据库，并且此命令从不会执行失败")])])]),X._v(" "),t("li",[t("p",[X._v("config")]),X._v(" "),t("blockquote",[t("p",[X._v("客户端可修改的 Redis 配置")])])])]),X._v(" "),t("h2",{attrs:{id:"_2-如何禁用或者重命名危险命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-如何禁用或者重命名危险命令"}},[X._v("#")]),X._v(" 2. 如何禁用或者重命名危险命令")]),X._v(" "),t("ol",[t("li",[X._v("看下redis.config 默认配置文件，找到SECURITY 区域，如以下所示：")])]),X._v(" "),t("p",[t("img",{attrs:{src:e(801),alt:"image-20200310214536838"}})]),X._v(" "),t("p",[X._v("看说明，添加rename-command 配置即可达到安全目的")]),X._v(" "),t("h2",{attrs:{id:"_2-禁用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-禁用命令"}},[X._v("#")]),X._v(" 2. 禁用命令")]),X._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[X._v('rename-command KEYS     ""\nrename-command FLUSHALL ""\nrename-command FLUSHDB  ""\nrename-command CONFIG   ""\n')])])]),t("h2",{attrs:{id:"_3-重命名命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-重命名命令"}},[X._v("#")]),X._v(" 3:重命名命令")]),X._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[X._v('rename-command KEYS     "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"\nrename-command FLUSHALL "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"\nrename-command FLUSHDB  "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"\nrename-command CONFIG   "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"\n')])])]),t("p",[X._v("上面的 XX 可以定义新命令名称，或者用随机字符代替。\n经过以上的设置之后，危险命令就不会被客户端执行了")]),X._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[X._v("#")]),X._v(" 参考文章")]),X._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/a169388842/article/details/82838818",target:"_blank",rel:"noopener noreferrer"}},[X._v("Redis禁用危险命令"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=s.exports},801:function(X,a,e){X.exports=e.p+"assets/img/image-20200310214536838.836d7e37.png"}}]);