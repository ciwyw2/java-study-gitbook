(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1189:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"清除挖矿程序-docker中ubuntu容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#清除挖矿程序-docker中ubuntu容器"}},[t._v("#")]),t._v(" 清除挖矿程序（docker中Ubuntu容器）")]),t._v(" "),e("p",[e("img",{attrs:{src:s(608),alt:"image-20200202232351270"}})]),t._v(" "),e("p",[t._v("我们可以看到kdevtmpfsi 这个进程CPU一直很高，100%了，接下来我们就开启排查")]),t._v(" "),e("h2",{attrs:{id:"_2-查看是否有定时任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看是否有定时任务"}},[t._v("#")]),t._v(" 2. 查看是否有定时任务")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("crontab -l\n")])])]),e("p",[e("img",{attrs:{src:s(609),alt:"image-20200202232702861"}})]),t._v(" "),e("p",[t._v("竟然没有定时任务")]),t._v(" "),e("h2",{attrs:{id:"_3-关闭进程并查看相关文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-关闭进程并查看相关文件"}},[t._v("#")]),t._v(" 3. 关闭进程并查看相关文件")]),t._v(" "),e("p",[t._v("我们使用kill pid 来关闭进程, 关闭进程之后cpu 是降下来了，我们查找本地是否有相关文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("find / -name kdevtmpfsi\n")])])]),e("p",[t._v("我们可以看到这里竟然有docker")]),t._v(" "),e("p",[e("img",{attrs:{src:s(610),alt:"image-20200202233209635"}})]),t._v(" "),e("h2",{attrs:{id:"_4-查看docker-相关进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看docker-相关进程"}},[t._v("#")]),t._v(" 4. 查看docker 相关进程")]),t._v(" "),e("p",[e("img",{attrs:{src:s(611),alt:"image-20200202233406083"}})]),t._v(" "),e("p",[t._v("就是这个ubutu死活杀不掉，哪怕你把容器和镜像都删除了，他也会自动重启，然后他在Ubuntu里面启动kdevtmpfsi")]),t._v(" "),e("h2",{attrs:{id:"_5-查看docker-详情"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-查看docker-详情"}},[t._v("#")]),t._v(" 5. 查看docker 详情")]),t._v(" "),e("p",[t._v("通过 docker inspect CONTAINER_ID查看容器详情")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("docker inspect 7110557eb73a\n")])])]),e("p",[t._v("我们看到这里有个定时")]),t._v(" "),e("p",[e("img",{attrs:{src:s(612),alt:"image-20200202234527883"}})]),t._v(" "),e("h2",{attrs:{id:"_6-进入ubuntu容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-进入ubuntu容器"}},[t._v("#")]),t._v(" 6. 进入Ubuntu容器")]),t._v(" "),e("p",[t._v("我们进入Ubuntu容器")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" docker exec -ti 7110557eb73a /bin/bash\n")])])]),e("p",[t._v("查看ubuntu里的定时任务")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("crontab -l\n")])])]),e("p",[e("img",{attrs:{src:s(613),alt:"image-20200202235031202"}})]),t._v(" "),e("h2",{attrs:{id:"_7-删除定时任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-删除定时任务"}},[t._v("#")]),t._v(" 7. 删除定时任务")]),t._v(" "),e("p",[t._v("执行 crontab -r")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("crontab -l  # 表示列出所有的定时任务\ncrontab -r  # 表示删除用户的定时任务，当执行此命令后，所有用户下面的定时任务会被删除，执行crontab -l后会提示用户：“no crontab for admin”12\n")])])]),e("h2",{attrs:{id:"_8-关闭docker-默认端口2375"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-关闭docker-默认端口2375"}},[t._v("#")]),t._v(" 8. 关闭docker 默认端口2375")]),t._v(" "),e("p",[t._v("这次被挖矿主要是因为阿里云开放了 docker 默认端口2375给远程访问，这才导致不法分子有可乘之机，阿里云关闭2375")])])}),[],!1,null,null,null);a.default=r.exports},608:function(t,a,s){t.exports=s.p+"assets/img/image-20200202232351270.16bd6c43.png"},609:function(t,a,s){t.exports=s.p+"assets/img/image-20200202232702861.6184cc79.png"},610:function(t,a,s){t.exports=s.p+"assets/img/image-20200202233209635.0049085b.png"},611:function(t,a,s){t.exports=s.p+"assets/img/image-20200202233406083.44380b9a.png"},612:function(t,a,s){t.exports=s.p+"assets/img/image-20200202234527883.573f8ae0.png"},613:function(t,a,s){t.exports=s.p+"assets/img/image-20200202235031202.41eb4748.png"}}]);