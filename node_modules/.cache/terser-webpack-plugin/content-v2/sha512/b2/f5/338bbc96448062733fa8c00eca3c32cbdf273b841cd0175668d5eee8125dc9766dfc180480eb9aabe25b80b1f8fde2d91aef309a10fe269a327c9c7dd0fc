{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[378],{1083:function(a,e,t){\"use strict\";t.r(e);var n=t(42),v=Object(n.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"bean的作用域\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#bean的作用域\"}},[a._v(\"#\")]),a._v(\" bean的作用域\")]),a._v(\" \"),t(\"p\",[a._v(\"默认情况下，Spring应用上下文中所有的bean 都是**单例（singleton）**的形式创建的。\")]),a._v(\" \"),t(\"p\",[a._v(\"也就是说，不管给定的一个bean 被注入到其他bean多少次，每次注入的都是同一个实例\")]),a._v(\" \"),t(\"p\",[a._v(\"##单例面临的问题\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"单例（适应大多数情况）\")]),a._v(\" \"),t(\"p\",[a._v(\"初始化和垃圾回收对象成本小\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"单例的局限性\")]),a._v(\" \"),t(\"p\",[a._v(\"但是有时候你所使用的类的异变的，他们会保持一些状态，因此重用是不安全的\")]),a._v(\" \"),t(\"h2\",{attrs:{id:\"bean的作用域-2\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#bean的作用域-2\"}},[a._v(\"#\")]),a._v(\" bean的作用域\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"单例（Singleton）\")]),a._v(\" \"),t(\"p\",[a._v(\"在整个应用中，只会创建bean的一个实例\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"原型（Prototype）\")]),a._v(\" \"),t(\"p\",[a._v(\"每次注入或者通过Spring应用上下文取的时候，都会创建一个新的bean\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"会话（Session）\")]),a._v(\" \"),t(\"p\",[a._v(\"在web应用中，为每一个会话创建一个bean实例\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"请求（Request）\")]),a._v(\" \"),t(\"p\",[a._v(\"在web应用中，为每一个请求创建一个bean实例\")])])]),a._v(\" \"),t(\"h2\",{attrs:{id:\"scope指定作用域\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#scope指定作用域\"}},[a._v(\"#\")]),a._v(\" @Scope指定作用域\")]),a._v(\" \"),t(\"p\",[a._v(\"使用@Scope指定作用域，他可以和@Component 和@Bean一起使用\")]),a._v(\" \"),t(\"p\",[a._v(\"结合@Component\")]),a._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[a._v(\"@Component\\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\\n\")])])]),t(\"p\",[a._v(\"结合@Bean\")]),a._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[a._v(\"@Bean\\n@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\\n\")])])]),t(\"p\",[a._v(\"使用Xml来配置\")]),a._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[a._v('<bean id = \"\"\\n\\tscope=\"prototype/>\\n')])])]),t(\"h2\",{attrs:{id:\"使用会话和请求作用域\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#使用会话和请求作用域\"}},[a._v(\"#\")]),a._v(\" 使用会话和请求作用域\")]),a._v(\" \"),t(\"p\",[a._v(\"典型应用\")]),a._v(\" \"),t(\"p\",[a._v(\"在电子商务网站中，有一个bean 代表用户购物车\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"单例情况\")]),a._v(\" \"),t(\"p\",[a._v(\"如果购物车是单例，那么导致所有用户都会向同一个购物车中添加商品\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"原型作用域\")]),a._v(\" \"),t(\"p\",[a._v(\"在应用某一处添加商品，在另一处就不能使用了，因为这里注入的是另一个原型购物车\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"会话作用域\")]),a._v(\" \"),t(\"p\",[a._v(\"最为合适，因为他和用户的关联最大\")])])]),a._v(\" \"),t(\"h4\",{attrs:{id:\"创建会话作用域\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建会话作用域\"}},[a._v(\"#\")]),a._v(\" 创建会话作用域\")]),a._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[a._v(\"@Component\\n@Scope(\\n\\tvalue=WebApplicationContext.SCOPE_SESSION\\n\\tproxyMode=SCopedproxyMode.INTERFACES\\n\\t)\\npublic SHoppingCart cart(){\\n    \\n}\\n\")])])])])}),[],!1,null,null,null);e.default=v.exports}}]);","extractedComments":[]}