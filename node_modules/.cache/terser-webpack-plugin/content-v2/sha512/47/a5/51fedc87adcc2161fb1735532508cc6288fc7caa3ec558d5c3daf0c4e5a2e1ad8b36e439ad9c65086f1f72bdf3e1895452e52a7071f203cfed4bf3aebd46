{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[265],{1193:function(t,s,a){\"use strict\";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"安装ftp服务\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装ftp服务\"}},[t._v(\"#\")]),t._v(\" 安装FTP服务\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"_1-安装vsftpd\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-安装vsftpd\"}},[t._v(\"#\")]),t._v(\" 1.安装vsftpd\")]),t._v(\" \"),a(\"p\",[t._v(\"安装前先查看ftp 是否已经安装，使用yum 安装\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"vsftpd -v\\nyum -y install vsftpd\\n\")])])]),a(\"h2\",{attrs:{id:\"_2-修改配置文件\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-修改配置文件\"}},[t._v(\"#\")]),t._v(\" 2. 修改配置文件\")]),t._v(\" \"),a(\"p\",[t._v(\"根据自己的需求，修改ftp配置文件\"),a(\"code\",[t._v(\"/etc/vsftpd/vsftpd.conf\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-objectivec extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-objectivec\"}},[a(\"code\",[t._v(\"anonymous_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"NO    # 是否允许匿名访问\\nlocal_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES      # 是否允许使用本地帐户进行 FTP 用户登录验证\\nlocal_umask\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"022\")]),t._v(\"      # 设置本地用户默认文件掩码\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"022\")]),t._v(\"\\nchroot_local_user\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES   # 是否限定用户在其主目录下（NO 表示允许切换到上级目录）\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token macro property\"}},[a(\"span\",{pre:!0,attrs:{class:\"token directive-hash\"}},[t._v(\"#\")]),a(\"span\",{pre:!0,attrs:{class:\"token directive keyword\"}},[t._v(\"chroot\")]),a(\"span\",{pre:!0,attrs:{class:\"token expression\"}},[t._v(\"_list_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES # 是否启用限制用户的名单（注释掉为禁用）\")])]),t._v(\"\\nchroot_list_file\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\"etc\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\"vsftpd\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"/\")]),t._v(\"chroot_list # 用户列表文件（一行一个用户）\\nallow_writeable_chroot\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES # 如果启用了限定用户在其主目录下需要添加这个配置，解决报错 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"500\")]),t._v(\" OOPS\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" vsftpd\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" refusing to run with writable root inside \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"chroot\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nxferlog_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES     # 启用上传和下载的日志功能，默认开启。\\nuse_localtime\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES     # 是否使用本地时\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"自行添加\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nuserlist_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES \\n\")])])]),a(\"p\",[t._v(\"chroot_local_user 与 chroot_list_enable 的组合效果如下：\")]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\"),t._v(\" \"),a(\"th\",[t._v(\"chroot_local_user=YES\")]),t._v(\" \"),a(\"th\",[t._v(\"chroot_local_user=NO\")])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[t._v(\"chroot_list_enable=YES\")]),t._v(\" \"),a(\"td\",[t._v(\"1. 所有用户都被限制在其主目录下 2. 使用 chroot_list_file 指定的用户列表，这些用户作为“例外”，不受限制\")]),t._v(\" \"),a(\"td\",[t._v(\"1. 所有用户都不被限制其主目录下 2. 使用 chroot_list_file 指定的用户列表，这些用户作为“例外”，受到限制\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"chroot_list_enable=NO\")]),t._v(\" \"),a(\"td\",[t._v(\"1. 所有用户都被限制在其主目录下 2. 不使用 chroot_list_file 指定的用户列表，没有任何“例外”用户\")]),t._v(\" \"),a(\"td\",[t._v(\"1. 所有用户都不被限制其主目录下 2. 不使用 chroot_list_file 指定的用户列表，没有任何“例外”用户\")])])])]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"注意：如果设置了 local_enable=YES ，自带\")])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"_3-启动ftp服务\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-启动ftp服务\"}},[t._v(\"#\")]),t._v(\" 3. 启动ftp服务\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"systemctl start vsftpd\\n\")])])]),a(\"h2\",{attrs:{id:\"_4-用户管理\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-用户管理\"}},[t._v(\"#\")]),t._v(\" 4. 用户管理\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"# 使用useradd 命令添加一个用户\\nuseradd ftpuser\\n# 设置用户密码\\npasswd ftpuser\\n\")])])]),a(\"h2\",{attrs:{id:\"_5-主动模式和被动模式\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-主动模式和被动模式\"}},[t._v(\"#\")]),t._v(\" 5. 主动模式和被动模式\")]),t._v(\" \"),a(\"p\",[t._v(\"ftp 的主动模式（Port 模式）与被动模式（PASV 模式）的区别：\"),a(\"a\",{attrs:{href:\"https://link.jianshu.com/?t=https%3A%2F%2Fwww.cnblogs.com%2Fxiaohh%2Fp%2F4789813.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"https://www.cnblogs.com/xiaohh/p/4789813.html\"),a(\"OutboundLink\")],1),t._v(\"\\n本文推荐使用\"),a(\"strong\",[t._v(\"被动模式\")]),t._v(\"，vsftp 默认即为被动模式\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"开启被动模式（PASV）\")])]),t._v(\" \"),a(\"p\",[t._v(\"在 \"),a(\"code\",[t._v(\"/etc/vsftpd/vsftpd.conf\")]),t._v(\" 配置文件添加如下配置\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-objectivec extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-objectivec\"}},[a(\"code\",[t._v(\"pasv_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES # 是否允许数据传输时使用PASV模式（默认值为 YES）\\npasv_min_port\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"port port_number # PASV 模式下，数据传输使用的端口下界（\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" 表示任意。默认值为 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\"）把端口范围设在比较高的一段范围内，比如 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"50000\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"-\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"60000\")]),t._v(\"，将有助于安全性的提高\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"\\npasv_max_port\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"port_number # PASV 模式下，数据传输使用的端口上界（\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" 表示任意。默认值为 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\"）\\npasv_promiscuous\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"NO # 是否屏蔽对 PASV 进行安全检查，默认值为 NO（当有安全隧道时可禁用）\\npasv_address # PASV 模式中服务器传回的 ip 地址。默认值为 none，即地址是从呼入的连接套接字中获取。\\n\")])])]),a(\"ul\",[a(\"li\",[t._v(\"开启主动模式（PORT）的配置\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-objectivec extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-objectivec\"}},[a(\"code\",[t._v(\"port_enable\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES  # 是否开启 Port 模式\\nconnect_from_port_20\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"YES # 当 Port 模式开启的时候，是否启用默认的 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"20\")]),t._v(\" 端口监听\\nftp_data_port\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"port_number # Port 模式下 FTP 数据传输所使用的端口，默认值为\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"20\")]),t._v(\"\\n\")])])]),a(\"h3\",{attrs:{id:\"参考文章\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考文章\"}},[t._v(\"#\")]),t._v(\" 参考文章\")]),t._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://www.jianshu.com/p/05dc6455b513\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"CentOS 7 安装 FTP 服务\"),a(\"OutboundLink\")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}