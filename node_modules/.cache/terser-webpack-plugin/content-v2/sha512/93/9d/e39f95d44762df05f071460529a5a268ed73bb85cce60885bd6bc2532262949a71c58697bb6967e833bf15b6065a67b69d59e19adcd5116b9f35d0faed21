{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1217:function(a,s,t){\"use strict\";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[e(\"h3\",{attrs:{id:\"linux-swap交换分区\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#linux-swap交换分区\"}},[a._v(\"#\")]),a._v(\" Linux Swap交换分区\")]),a._v(\" \"),e(\"h2\",{attrs:{id:\"_1-swap交换分区概念\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-swap交换分区概念\"}},[a._v(\"#\")]),a._v(\" 1. Swap交换分区概念\")]),a._v(\" \"),e(\"p\",[a._v(\"Linux内核为了提高读写效率与速度，会将文件在内存中进行缓存，这部分内存就是Cache Memory(缓存内存)。\"),e(\"strong\",[a._v(\"即使你的程序运行结束后，Cache Memory也不会自动释放。\"),e(\"strong\",[a._v(\"这就会导致你再Linux系统中\")]),a._v(\"程序频繁读写文件\")]),a._v(\"后，你会发现\"),e(\"strong\",[a._v(\"可用内存变少\")]),a._v(\"。当系统的无力内存不够用的时候，就需要将无力内存的一部分释放出来，以供当前运行的程序使用。\")]),a._v(\" \"),e(\"p\",[a._v(\"那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些**被释放的空间被临时保存到Swap空间中，**等到那些程序要运行时，再从Swap分区中恢复保存的数据到内存中。这样，系统总是在物理内存不够时，才进行Swap交换。\")]),a._v(\" \"),e(\"h2\",{attrs:{id:\"_2-查看swap分区大小\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-查看swap分区大小\"}},[a._v(\"#\")]),a._v(\" 2. 查看Swap分区大小\")]),a._v(\" \"),e(\"p\",[a._v(\"查看Swap分区的大小以及使用情况，一般使用free命令。当前我们并没设置swap分区\")]),a._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:t(617),alt:\"image-20200206122221579\"}})]),a._v(\" \"),e(\"p\",[a._v(\"我们可以使用swapon命令查看当前swap相关信息：例如swap空间是swap partition，Swap size，使用情况等详细信息\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"swapon -s\\n\")])])]),e(\"p\",[e(\"img\",{attrs:{src:t(618),alt:\"image-20200206130028437\"}})]),a._v(\" \"),e(\"h2\",{attrs:{id:\"_3-创建swap区分\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-创建swap区分\"}},[a._v(\"#\")]),a._v(\" 3. 创建swap区分\")]),a._v(\" \"),e(\"h3\",{attrs:{id:\"_3-1-创建swap文件\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-创建swap文件\"}},[a._v(\"#\")]),a._v(\" 3.1 创建swap文件\")]),a._v(\" \"),e(\"div\",{staticClass:\"language-swift extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-swift\"}},[e(\"code\",[a._v(\"cd \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"var\")]),a._v(\"\\nsudo mkdir \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[a._v(\"swap\")]),a._v(\"\\nsudo dd \"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"if\")]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),a._v(\"dev\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),a._v(\"zero of\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),a._v(\"swapfile bs\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"1024\")]),a._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[a._v(\"count\")]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"2000000\")]),a._v(\"\\n\")])])]),e(\"p\",[a._v(\"count代表的是大小，我这里是2G。\")]),a._v(\" \"),e(\"h3\",{attrs:{id:\"_3-2-把文件转换为swap文件\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-把文件转换为swap文件\"}},[a._v(\"#\")]),a._v(\" 3.2 把文件转换为swap文件\")]),a._v(\" \"),e(\"div\",{staticClass:\"language-csharp extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-csharp\"}},[e(\"code\",[a._v(\" sudo mkswap swapfile\\n\")])])]),e(\"p\",[e(\"img\",{attrs:{src:t(619),alt:\"image-20200206124047741\"}})]),a._v(\" \"),e(\"h3\",{attrs:{id:\"_3-3-激活swap文件\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-3-激活swap文件\"}},[a._v(\"#\")]),a._v(\" 3.3 激活swap文件\")]),a._v(\" \"),e(\"p\",[a._v(\"这里可以直接用命令挂载上一个swap分区，但是重启后要重新挂载：\")]),a._v(\" \"),e(\"div\",{staticClass:\"language-csharp extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-csharp\"}},[e(\"code\",[a._v(\"挂载： sudo swapon \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"var\")]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),a._v(\"swapfile\\n如果不需要了，可以也可以卸载：\\n卸载：sudo swapoff \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"var\")]),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"/\")]),a._v(\"swapfile\\n\")])])]),e(\"h3\",{attrs:{id:\"_3-4-开机启动后自动挂载\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-4-开机启动后自动挂载\"}},[a._v(\"#\")]),a._v(\" 3.4 开机启动后自动挂载\")]),a._v(\" \"),e(\"p\",[a._v(\"如果需要开机启动后自动挂载的话，可以把它添加到/etc/fstab文件中。\")]),a._v(\" \"),e(\"p\",[a._v(\"开机自动挂载SWAP分区，\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"vim /etc/fstab\\n\")])])]),e(\"p\",[a._v(\"在文件末尾添加\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"/var/swapfile   swap  swap  defaults  0  0\\n\")])])]),e(\"h3\",{attrs:{id:\"_3-5-查看使用成功\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-5-查看使用成功\"}},[a._v(\"#\")]),a._v(\" 3.5 查看使用成功\")]),a._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:t(620),alt:\"image-20200206125218923\"}})]),a._v(\" \"),e(\"h2\",{attrs:{id:\"_4-swappiness属性\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-swappiness属性\"}},[a._v(\"#\")]),a._v(\" 4. swappiness属性\")]),a._v(\" \"),e(\"h3\",{attrs:{id:\"_4-1-swappiness属性介绍\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-1-swappiness属性介绍\"}},[a._v(\"#\")]),a._v(\" 4.1 swappiness属性介绍\")]),a._v(\" \"),e(\"p\",[a._v(\"swappiness的值得大小对如何使用swap分区是有很大联系的。Linux下设置swappiness\"),e(\"strong\",[a._v(\"参数来配置内存使用到多少才开始使用swap分区\")])]),a._v(\" \"),e(\"ul\",[e(\"li\",[a._v(\"swappiness=0:表示最大限度使用物理内存，然后才是swap空间\")]),a._v(\" \"),e(\"li\",[a._v(\"swappiness＝100:表示积极的使用swap分区，并且把内存上的数据及时的搬运到swap空间里面\")])]),a._v(\" \"),e(\"h3\",{attrs:{id:\"_4-2-永久更改方法\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-2-永久更改方法\"}},[a._v(\"#\")]),a._v(\" 4.2 永久更改方法\")]),a._v(\" \"),e(\"p\",[a._v(\"修改 /etc/sysctl.conf\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"sudo vim /etc/sysctl.conf\\n\")])])]),e(\"p\",[a._v(\"在末尾加上\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"vm.swappiness = 10\\n\")])])]),e(\"p\",[a._v(\"生效\")]),a._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[a._v(\"sudo sysctl -p\\n\")])])]),e(\"h2\",{attrs:{id:\"参考文章\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考文章\"}},[a._v(\"#\")]),a._v(\" 参考文章\")]),a._v(\" \"),e(\"p\",[e(\"a\",{attrs:{href:\"https://www.jianshu.com/p/04c7a9ab438c\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a._v(\"Linux 开启 Swap分区 教程\"),e(\"OutboundLink\")],1)])])}),[],!1,null,null,null);s.default=r.exports},617:function(a,s,t){a.exports=t.p+\"assets/img/image-20200206122221579.dacc4ed4.png\"},618:function(a,s,t){a.exports=t.p+\"assets/img/image-20200206130028437.253fe4b5.png\"},619:function(a,s,t){a.exports=t.p+\"assets/img/image-20200206124047741.e9c65b0f.png\"},620:function(a,s,t){a.exports=t.p+\"assets/img/image-20200206125218923.c53f224a.png\"}}]);","extractedComments":[]}