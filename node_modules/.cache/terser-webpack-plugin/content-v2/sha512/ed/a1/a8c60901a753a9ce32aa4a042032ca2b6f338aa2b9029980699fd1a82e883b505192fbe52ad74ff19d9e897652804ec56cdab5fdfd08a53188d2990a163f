{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[413],{953:function(t,s,a){\"use strict\";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"view视图\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#view视图\"}},[t._v(\"#\")]),t._v(\" VIEW视图\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"_1-是什么\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-是什么\"}},[t._v(\"#\")]),t._v(\" 1. 是什么\")]),t._v(\" \"),a(\"p\",[t._v(\"视图是虚拟的表，与包含数据的表不一样，视图值包含使用时动态检索数据的查询\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"MySQL 从5版本开始支持视图\")]),t._v(\" \"),a(\"p\",[t._v(\"SQLite 只支持读视图，不支持更改\")])]),t._v(\" \"),a(\"p\",[t._v(\"视图提供了一种封装SELECT 语句的层次，可以用来简化数据处理，重新格式化或保护基础数据\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_1-1-使用背景\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-1-使用背景\"}},[t._v(\"#\")]),t._v(\" 1.1 使用背景\")]),t._v(\" \"),a(\"p\",[t._v(\"我们先看一个SQL\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT cust_name,cust_contact\\nFROM Customers,Orders,OrderItems\\nWHERE Customers.cust_id = Orders.cust_id\\nAND OrderItem.order_num = Orders.order_num\\nAND prod_id = 'RANG01'；\\n\")])])]),a(\"p\",[t._v(\"这里查看用来检索订购了某种商品的顾客。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"任何需要这个数据的人都必须理解相关的表结构，知道如何创建查询和对表进行联结\")]),t._v(\"检索其他产品的相同数据，必须修改最后的where子句\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_1-2-使用视图包装成虚拟表\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-2-使用视图包装成虚拟表\"}},[t._v(\"#\")]),t._v(\" 1.2 使用视图包装成虚拟表\")]),t._v(\" \"),a(\"p\",[t._v(\"我们可以吧整个查询包装成一个名为ProductCustomers 的虚拟表，则可以轻松的检索出相同的数据\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT cust_name,cust_contact\\nFROM ProductCustomers\\nWHERE prod_id = 'RANG01';\\n\")])])]),a(\"p\",[t._v(\"ProductCustomers 是一个视图，他不包含任何列或数据，包含的是一个查询\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"_2-为什么使用视图\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-为什么使用视图\"}},[t._v(\"#\")]),t._v(\" 2. 为什么使用视图\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"重用SQL语句\")]),t._v(\" \"),a(\"li\",[t._v(\"简化复杂的SQL操作，在编写查询后，可以方便得重用他而不必知道其基本查询细节\")]),t._v(\" \"),a(\"li\",[t._v(\"使用表的一部分而不是整个表\")]),t._v(\" \"),a(\"li\",[t._v(\"保护数据。可以授予用户访问表的特定部分权限，而不是整个表的访问权限\")]),t._v(\" \"),a(\"li\",[t._v(\"更改数据格式和表示。视图可以返回与底层表的表示和格式不同的数据\")])]),t._v(\" \"),a(\"p\",[t._v(\"创建视图之后，可以用与表的基本相同的方式使用他们。可以对视图执行SELECT 操作，过滤，排序数据。将视图联结到其他视图或表，甚至天天加班和更新数据\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"视图本身不包含数据，返回的数据来自其他表\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_2-1-性能问题\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-1-性能问题\"}},[t._v(\"#\")]),t._v(\" 2.1 性能问题\")]),t._v(\" \"),a(\"p\",[t._v(\"因为视图不包含数据，所以每次使用视图时，都必须处理查询执行时需要的所有检索。\")]),t._v(\" \"),a(\"p\",[t._v(\"如果你用多个联结和过滤创建了复杂的视图或者嵌套了视图，性能可能就会下降的厉害。\")]),t._v(\" \"),a(\"p\",[t._v(\"PS:部署前要进行测试\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"_3-创建视图\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-创建视图\"}},[t._v(\"#\")]),t._v(\" 3. 创建视图\")]),t._v(\" \"),a(\"p\",[t._v(\"视图用CREATE VIEW 来创建\")]),t._v(\" \"),a(\"blockquote\",[a(\"p\",[t._v(\"删除视图：DROP VIEW viewname;\")]),t._v(\" \"),a(\"p\",[t._v(\"重命名视图：必须先删除在重新创建\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"_3-1-利用视图简化复杂的联结\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-1-利用视图简化复杂的联结\"}},[t._v(\"#\")]),t._v(\" 3.1 利用视图简化复杂的联结\")]),t._v(\" \"),a(\"p\",[t._v(\"一个最常见的视图应用是隐藏复杂的SQL,这通常涉及联结\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"CREATE VIEW ProductCustomers AS\\nSELECT cust_name,cust_contact,prod_id\\nFROM Customer,Orders,OrderItems\\nWHERE Customer.cust-id= Orders.cust_id\\nAND OrderItems.order_num = Orders.order_num;\\n\")])])]),a(\"p\",[t._v(\"这条语句创建了一个名为ProductCustomers 的视图，联结了三个表，返回已订购了任意产品的所有顾客列表\")]),t._v(\" \"),a(\"p\",[t._v(\"检索订购了产品RANG01 的顾客\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"SELECT cust_name,cust_contact\\nFROM ProductCustomers\\nWHERE prod_id = 'RANG01';\\n\")])])]),a(\"h3\",{attrs:{id:\"_3-2-用视图重新格式化检索出的数据\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-2-用视图重新格式化检索出的数据\"}},[t._v(\"#\")]),t._v(\" 3.2 用视图重新格式化检索出的数据\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"CREATE VIEW VendorLocations AS \\nSELECT RTRIM(vend_name)+'('+RTRIM(vend_country)+')' AS vend_id\\nFROM Vendors;\\n\")])])]),a(\"h3\",{attrs:{id:\"_3-3-使用视图过滤不想要的数据\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-3-使用视图过滤不想要的数据\"}},[t._v(\"#\")]),t._v(\" 3.3 使用视图过滤不想要的数据\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"CREATE VIEW CustomerEMailList AS \\nSELECT cust_id,cust_name,cust_email\\nFROM Customers\\nWHERE cust_email IS NOT NULL;\\n\")])])]),a(\"h3\",{attrs:{id:\"_3-4-使用视图与计算字段\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-4-使用视图与计算字段\"}},[t._v(\"#\")]),t._v(\" 3.4 使用视图与计算字段\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"CREATE VIEW OrderItemsExpanded AS \\nSELECT order_num,\\n\\t\\tprod_id,\\n\\t\\tqquantity*item_price AS expanded_price\\nFROM OrderItems;\\n\")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}